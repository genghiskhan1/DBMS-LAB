DROP TABLE RESERVES;
DROP TABLE SAILOR;
DROP TABLE BOAT;

CREATE TABLE BOAT (
BID NUMBER(10) PRIMARY KEY,
BNAME VARCHAR(10) NOT NULL,
COLOUR VARCHAR(10) NOT NULL
);

INSERT INTO BOAT VALUES(100,'RANA','BLACK');
INSERT INTO BOAT VALUES(101,'SURANA','BLACK');
INSERT INTO BOAT VALUES(102,'TURANA','WHITE');
INSERT INTO BOAT VALUES(103,'SRIRANA','BROWN');

CREATE TABLE SAILOR (
SID NUMBER(10) PRIMARY KEY,
SNAME VARCHAR(10) NOT NULL,
AGE NUMBER(10) NOT NULL,
RATING NUMBER(10) NOT NULL
);

INSERT INTO SAILOR VALUES(1,'RAM',30,40);
INSERT INTO SAILOR VALUES(2,'SRIRAM',40,60);
INSERT INTO SAILOR VALUES(3,'LUBBER',35,50);

CREATE TABLE RESERVES (
BID NUMBER(10) NOT NULL,
SID NUMBER(10) NOT NULL,
DAY VARCHAR(10) NOT NULL,
FOREIGN KEY (BID) REFERENCES BOAT (BID) ON DELETE CASCADE,
FOREIGN KEY (SID) REFERENCES SAILOR (SID) ON DELETE CASCADE,
PRIMARY KEY(BID,SID)
);

INSERT INTO RESERVES VALUES(100,1,'MONDAY');
INSERT INTO RESERVES VALUES(101,2,'MONDAY');
INSERT INTO RESERVES VALUES(102,2,'FRIDAY');
INSERT INTO RESERVES VALUES(103,3,'MONDAY');
INSERT INTO RESERVES VALUES(101,3,'TUESDAY');
INSERT INTO RESERVES VALUES(102,3,'FRIDAY');
INSERT INTO RESERVES VALUES(101,1,'TUESDAY');

DESC BOAT;
DESC SAILOR;
DESC RESERVES;

SELECT *FROM BOAT;
SELECT *FROM SAILOR;
SELECT *FROM RESERVES;

SELECT BOAT.BID
FROM BOAT,SAILOR,RESERVES
WHERE BOAT.BID=RESERVES.BID AND
RESERVES.SID=SAILOR.SID AND
SAILOR.SNAME='RAM';

SELECT SAILOR.SNAME,BOAT.BID
FROM SAILOR,BOAT,RESERVES
WHERE SAILOR.SID=RESERVES.SID AND
RESERVES.BID=BOAT.BID;

SELECT BOAT.COLOURDROP TABLE RESERVES;
DROP TABLE SAILOR;
DROP TABLE BOAT;

CREATE TABLE BOAT (
BID NUMBER(10) PRIMARY KEY,
BNAME VARCHAR(10) NOT NULL,
COLOUR VARCHAR(10) NOT NULL
);

INSERT INTO BOAT VALUES(100,'RANA','BLACK');
INSERT INTO BOAT VALUES(101,'SURANA','BLACK');
INSERT INTO BOAT VALUES(102,'TURANA','WHITE');
INSERT INTO BOAT VALUES(103,'SRIRANA','BROWN');

CREATE TABLE SAILOR (
SID NUMBER(10) PRIMARY KEY,
SNAME VARCHAR(10) NOT NULL,
AGE NUMBER(10) NOT NULL,
RATING NUMBER(10) NOT NULL
);

INSERT INTO SAILOR VALUES(1,'RAM',30,40);
INSERT INTO SAILOR VALUES(2,'SRIRAM',40,60);
INSERT INTO SAILOR VALUES(3,'LUBBER',35,50);

CREATE TABLE RESERVES (
BID NUMBER(10) NOT NULL,
SID NUMBER(10) NOT NULL,
DAY VARCHAR(10) NOT NULL,
FOREIGN KEY (BID) REFERENCES BOAT (BID) ON DELETE CASCADE,
FOREIGN KEY (SID) REFERENCES SAILOR (SID) ON DELETE CASCADE,
PRIMARY KEY(BID,SID)
);

INSERT INTO RESERVES VALUES(100,1,'MONDAY');
INSERT INTO RESERVES VALUES(101,2,'MONDAY');
INSERT INTO RESERVES VALUES(102,2,'FRIDAY');
INSERT INTO RESERVES VALUES(103,3,'MONDAY');
INSERT INTO RESERVES VALUES(101,3,'TUESDAY');
INSERT INTO RESERVES VALUES(102,3,'FRIDAY');
INSERT INTO RESERVES VALUES(101,1,'TUESDAY');

DESC BOAT;
DESC SAILOR;
DESC RESERVES;

SELECT *FROM BOAT;
SELECT *FROM SAILOR;
SELECT *FROM RESERVES;

SELECT BOAT.BID
FROM BOAT,SAILOR,RESERVES
WHERE BOAT.BID=RESERVES.BID AND
RESERVES.SID=SAILOR.SID AND
SAILOR.SNAME='RAM';

SELECT SAILOR.SNAME,BOAT.BID
FROM SAILOR,BOAT,RESERVES
WHERE SAILOR.SID=RESERVES.SID AND
RESERVES.BID=BOAT.BID;

SELECT BOAT.COLOUR
FROM BOAT,RESERVES,SAILOR
WHERE BOAT.BID=RESERVES.BID AND
RESERVES.SID=SAILOR.SID AND
SAILOR.SNAME='LUBBER';

SELECT SAILOR.SNAME
FROM SAILOR,BOAT,RESERVES
WHERE SAILOR.SID=RESERVES.SID AND
RESERVES.BID=BOAT.BID AND
BOAT.BID='103';

SELECT SAILOR.SNAME,COUNT(BOAT.BID)
FROM SAILOR,BOAT,RESERVES
WHERE SAILOR.SID=RESERVES.SID AND
RESERVES.BID=BOAT.BID
GROUP BY SAILOR.SNAME;

FROM BOAT,RESERVES,SAILOR
WHERE BOAT.BID=RESERVES.BID AND
RESERVES.SID=SAILOR.SID AND
SAILOR.SNAME='LUBBER';

SELECT SAILOR.SNAME
FROM SAILOR,BOAT,RESERVES
WHERE SAILOR.SID=RESERVES.SID AND
RESERVES.BID=BOAT.BID AND
BOAT.BID='103';

SELECT SAILOR.SNAME,COUNT(BOAT.BID)
FROM SAILOR,BOAT,RESERVES
WHERE SAILOR.SID=RESERVES.SID AND
RESERVES.BID=BOAT.BID
GROUP BY SAILOR.SNAME;
